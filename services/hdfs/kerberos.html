<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">








<head>
<title>HDFS: Kerberos</title>
<link rel="stylesheet" type="text/css" media="all" href="../../style/layout.css" />
<link rel="shortcut icon" type="image/png" href="https://mesosphere.com/favicon.ico"/>
<!-- The Dropdown library is written by Stephen Morley, licensed CC0 1.0 Universal (Public Domain Dedication)-->
<link rel="stylesheet" type="text/css" media="all" href="../../style/Dropdown.css" />
<script src="../../style/Dropdown.js"></script>
<style type="text/css">
/* set the background color of menu items */
.dropdown, .dropdown ul { background: #555555; clear: both; }
/* set the background color of active items */
.dropdown li:hover > a, .dropdown li:hover > span, .dropdown li.dropdownOpen > a, .dropdown li.dropdownOpen > span { background: #af87e0; }
/* pad items, set their text color, and fade their background color */
.dropdown a, .dropdown span { padding: 0.25em 0.5em; color: white; transition: background 0.2s; }
/* show '+' on expandable items */
.dropdown span:after { content: " +"; }

/* toc style: remove extra margin between elements */
.section-nav ul { margin: 0; }
</style>
</head>

<body>
<div id="wrapper">

<a href="../..">
<img style="float: left; margin-bottom: 2em" src="https://mesosphere.com/wp-content/themes/mesosphere/library/images/assets/dcos-sdk-logo.png" width="250" alt="DC/OS Software Development Kit" />
</a>
<img style="float: right" src="https://img.shields.io/badge/Status-Alpha-BF97F0.svg?style=flat-square" alt="Status: Alpha" />

<ul class="dropdown" style="clear: both">
  <li>
    <a href="../..">Home</a>
  </li>
  <li>
    <span>Documentation</span>
    <ul>
      
      
      
      
      <li><a href="../../operations-guide.html">SDK Operations Guide</a></li>
      
      
      
      
      
      <li><a href="../../developer-guide.html">SDK Developer Guide</a></li>
      
      
      
      <li><a href="../../yaml-reference.html">YAML Reference</a></li>
      
      
      
      <li><a href="../../faq.html">Frequently Asked Questions</a></li>
      
      
      
      <li><a href="../../glossary.html">Glossary</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li><a href="../../reference/api">Javadoc Reference</a></li>
      <li><a href="../../reference/swagger-api">REST APIs</a></li>
    </ul>
  </li>
  <li>
    <span>Tutorials</span>
    <ul>
      
      
      
      <li><a href="../../tutorials/secrets-tutorial.html">Secrets Tutorial</a></li>
      
      <li><a href="../../tutorials/kafka-tutorial.html">Kafka Tutorial</a></li>
      
    </ul>
  </li>
  <li>
    <span>Services</span>
    <ul>
      
      
      
      
      <li>
        
        <span>Cassandra</span>
        
        <ul>
          
          
          
          <li><a href="../../services/cassandra/install.html">Installing and Customizing</a></li>
          
          
          
          <li><a href="../../services/cassandra/service-settings.html">Service Settings</a></li>
          
          
          
          <li><a href="../../services/cassandra/cassandra-settings.html">Cassandra Settings</a></li>
          
          
          
          <li><a href="../../services/cassandra/node-settings.html">Node Settings</a></li>
          
          
          
          <li><a href="../../services/cassandra/uninstall.html">Uninstall</a></li>
          
          
          
          <li><a href="../../services/cassandra/quick-start.html">Quick Start</a></li>
          
          
          
          <li><a href="../../services/cassandra/connecting-clients.html">Connecting Clients</a></li>
          
          
          
          <li><a href="../../services/cassandra/managing.html">Managing</a></li>
          
          
          
          <li><a href="../../services/cassandra/api-reference.html">API Reference</a></li>
          
          
          
          <li><a href="../../services/cassandra/disaster-recovery.html">Disaster Recovery</a></li>
          
          
          
          <li><a href="../../services/cassandra/troubleshooting.html">Troubleshooting</a></li>
          
          
          
          <li><a href="../../services/cassandra/limitations.html">Limitations</a></li>
          
          
          
          <li><a href="../../services/cassandra/supported-versions.html">Supported Versions</a></li>
          
          
          
          <li><a href="../../services/cassandra/release-notes.html">Release Notes</a></li>
          
          
          
          <li><a href="../../services/cassandra/upgrade.html">Upgrade</a></li>
          
          
        </ul>
      </li>
      
      <li>
        
        <span>Elastic</span>
        
        <ul>
          
          
          
          <li><a href="../../services/elastic/install.html">Install and Customize</a></li>
          
          
          
          <li><a href="../../services/elastic/elastic-x-pack.html">X-Pack</a></li>
          
          
          
          <li><a href="../../services/elastic/custom-elasticsearch-yaml.html">Custom Elasticsearch YAML</a></li>
          
          
          
          <li><a href="../../services/elastic/uninstall.html">Uninstall</a></li>
          
          
          
          <li><a href="../../services/elastic/quick-start.html">Quick Start</a></li>
          
          
          
          <li><a href="../../services/elastic/connecting-clients.html">Connecting Clients</a></li>
          
          
          
          <li><a href="../../services/elastic/managing.html">Managing</a></li>
          
          
          
          <li><a href="../../services/elastic/api-reference.html">API Reference</a></li>
          
          
          
          <li><a href="../../services/elastic/disaster-recovery.html">Disaster Recovery</a></li>
          
          
          
          <li><a href="../../services/elastic/troubleshooting.html">Troubleshooting</a></li>
          
          
          
          <li><a href="../../services/elastic/limitations.html">Limitations</a></li>
          
          
          
          <li><a href="../../services/elastic/supported-versions.html">Supported Versions</a></li>
          
          
          
          <li><a href="../../services/elastic/release-notes.html">Release Notes</a></li>
          
          
          
          <li><a href="../../services/elastic/upgrade.html">Upgrade</a></li>
          
          
        </ul>
      </li>
      
      <li>
        
        <span>HDFS</span>
        
        <ul>
          
          
          
          <li><a href="../../services/hdfs/install.html">Install and Customize</a></li>
          
          
          
          <li><a href="../../services/hdfs/kerberos.html">Kerberos</a></li>
          
          
          
          <li><a href="../../services/hdfs/uninstall.html">Uninstall</a></li>
          
          
          
          <li><a href="../../services/hdfs/quick-start.html">Quickstart</a></li>
          
          
          
          <li><a href="../../services/hdfs/connecting-clients.html">Connecting Clients</a></li>
          
          
          
          <li><a href="../../services/hdfs/managing.html">Managing</a></li>
          
          
          
          <li><a href="../../services/hdfs/api-reference.html">API Reference</a></li>
          
          
          
          <li><a href="../../services/hdfs/troubleshooting.html">Troubleshooting</a></li>
          
          
          
          <li><a href="../../services/hdfs/limitations.html">Limitations</a></li>
          
          
          
          <li><a href="../../services/hdfs/supported-versions.html">Supported Versions</a></li>
          
          
          
          <li><a href="../../services/hdfs/release-notes.html">Release Notes</a></li>
          
          
          
          <li><a href="../../services/hdfs/upgrade.html">Upgrade</a></li>
          
          
        </ul>
      </li>
      
      <li>
        
        <span>Kafka</span>
        
        <ul>
          
          
          
          <li><a href="../../services/kafka/install.html">Install and Customize</a></li>
          
          
          
          <li><a href="../../services/kafka/kerberos.html">Kerberos</a></li>
          
          
          
          <li><a href="../../services/kafka/ssl-auth.html">SSL Auth</a></li>
          
          
          
          <li><a href="../../services/kafka/uninstall.html">Uninstall</a></li>
          
          
          
          <li><a href="../../services/kafka/quick-start.html">Quick Start</a></li>
          
          
          
          <li><a href="../../services/kafka/connecting-clients.html">Connecting Clients</a></li>
          
          
          
          <li><a href="../../services/kafka/managing.html">Managing</a></li>
          
          
          
          <li><a href="../../services/kafka/api-reference.html">API Reference</a></li>
          
          
          
          <li><a href="../../services/kafka/troubleshooting.html">Troubleshooting</a></li>
          
          
          
          <li><a href="../../services/kafka/limitations.html">Limitations</a></li>
          
          
          
          <li><a href="../../services/kafka/supported-versions.html">Supported Versions</a></li>
          
          
          
          <li><a href="../../services/kafka/release-notes.html">Release Notes</a></li>
          
          
          
          <li><a href="../../services/kafka/upgrade.html">Upgrade</a></li>
          
          
        </ul>
      </li>
      
    </ul>
  </li>
  <li><a href="https://github.com/mesosphere/dcos-commons/blob/master/CONTRIBUTING.md">Contributing</a></li>
  <li><a href="http://chat.dcos.io" target="_blank">Slack</a></li>
</ul>
<h1>HDFS: Kerberos</h1>
<div id="content">

<h2 id="setting-up-apache-hadoop-distributed-file-system-hdfs-with-kerberos">Setting up Apache Hadoop Distributed File System (HDFS) with Kerberos</h2>

<p>The utility tool <code class="highlighter-rouge">kinit</code> needs to be installed on the agents and be accessible from within the tasks’ containers in order for the system to deploy correctly.</p>

<h2 id="create-principals">Create principals</h2>

<p>In order to run Apache HDFS with Kerberos security enabled, a principal needs to be added for every service component in the cluster. The following principals are required (although the realm can be modified):</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hdfs/name-0-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/name-0-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
hdfs/name-0-zkfc.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/name-0-zkfc.hdfs.autoip.dcos.thisdcos.directory@LOCAL
hdfs/name-1-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/name-1-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
hdfs/name-1-zkfc.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/name-1-zkfc.hdfs.autoip.dcos.thisdcos.directory@LOCAL
hdfs/journal-0-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/journal-0-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
hdfs/journal-1-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/journal-1-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
hdfs/journal-2-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/journal-2-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
hdfs/data-0-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/data-0-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
hdfs/data-1-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/data-1-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
hdfs/data-2-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/data-2-node.hdfs.autoip.dcos.thisdcos.directory@LOCAL
HTTP/api.hdfs.marathon.l4lb.thisdcos.directory@LOCAL
</code></pre></div></div>
<p>This cluster has 3 data nodes, though the correct number of principals should be added up to N data nodes.
(assuming a default service name of <code class="highlighter-rouge">hdfs</code>)</p>

<p>Note that the service name is part of the instance in the principal. The template of a principal with <code class="highlighter-rouge">hdfs</code> primary is:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hdfs/&lt;pod-type&gt;-&lt;pod-index&gt;-&lt;task-type&gt;.&lt;service-name&gt;.autoip.dcos.thisdcos.directory@&lt;REALM&gt;
</code></pre></div></div>
<p>Given a service name of <code class="highlighter-rouge">hdfs-demo</code>, the principal for a name node becomes:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hdfs/name-0-node.hdfs-demo.autoip.dcos.thisdcos.directory@LOCAL
</code></pre></div></div>

<p>Also note that if the service name is foldered, such as <code class="highlighter-rouge">myfolder/hdfs</code>, then the FQDN in the instance of the principal
becomes <code class="highlighter-rouge">myfolderhdfs</code>. For example:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hdfs/name-0-node.myfolderhdfs.autoip.dcos.thisdcos.directory@LOCAL
</code></pre></div></div>

<h2 id="create-the-keytab-secret">Create the keytab secret</h2>

<p>Once the principals have been created, a keytab file must be generated and uploaded to the DC/OS secret store as a base-64-encoded value. Assuming the keytab for <strong>all</strong> the HDFS principals has been created as a file <code class="highlighter-rouge">keytab</code>, this can be added to the secret store as follows (note that the DC/OS Enterprise CLI needs to be installed to gain access to the <code class="highlighter-rouge">security</code> command):</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">base64</span> <span class="nt">-w0</span> keytab <span class="o">&gt;</span> keytab.base64
<span class="nv">$ </span>dcos security secrets create  __dcos_base64__keytab <span class="nt">--value-file</span> keytab.base64
</code></pre></div></div>

<p>The name of the secret created (<code class="highlighter-rouge">__dcos_base64__keytab</code>) can be changed, as long as the <code class="highlighter-rouge">__dcos__base64__</code> prefix is maintained.</p>

<h2 id="deploy-kerberized-hdfs">Deploy kerberized HDFS</h2>

<p>Create the following <code class="highlighter-rouge">kerberos-options.json</code> file:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hdfs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"security"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"kerberos"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"kdc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"hostname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kdc.marathon.autoip.dcos.thisdcos.directory"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"realm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LOCAL"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"keytab_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"__dcos_base64__keytab"</span><span class="w">

            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Note the specification of the secret name as created in the previous step.</p>

<p>The kerberized Apache HDFS service is then deployed by running:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>dcos package <span class="nb">install </span>hdfs <span class="nt">--options</span><span class="o">=</span>kerberos-options.json
</code></pre></div></div>

<h2 id="active-directory">Active Directory</h2>

<p>Kerberized Apache HDFS also supports Active Directory as a KDC. Here the generation of principals and the relevant keytab should be adapted for the tools made available by the Active Directory installation.</p>

<p>As an example, the <code class="highlighter-rouge">ktpass</code> utility can be used to generate the keytab for the Apache HDFS principals as follows:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ktpass.exe                    /princ hdfs/name-0-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser name-0-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass            /out hdfs-00.keytab
ktpass.exe /in hdfs-00.keytab /princ HTTP/name-0-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser http-name-0-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass       /out hdfs-01.keytab
ktpass.exe /in hdfs-01.keytab /princ hdfs/name-0-zkfc.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser name-0-zkfc@example.com /ptype KRB5_NT_PRINCIPAL +rndPass            /out hdfs-02.keytab
ktpass.exe /in hdfs-02.keytab /princ HTTP/name-0-zkfc.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser http-name-0-zkfc@example.com /ptype KRB5_NT_PRINCIPAL +rndPass       /out hdfs-03.keytab
ktpass.exe /in hdfs-03.keytab /princ hdfs/name-1-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser name-1-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass            /out hdfs-04.keytab
ktpass.exe /in hdfs-04.keytab /princ HTTP/name-1-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser http-name-1-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass       /out hdfs-05.keytab
ktpass.exe /in hdfs-05.keytab /princ hdfs/name-1-zkfc.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser name-1-zkfc@example.com /ptype KRB5_NT_PRINCIPAL +rndPass            /out hdfs-06.keytab
ktpass.exe /in hdfs-06.keytab /princ HTTP/name-1-zkfc.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser http-name-1-zkfc@example.com /ptype KRB5_NT_PRINCIPAL +rndPass       /out hdfs-07.keytab
ktpass.exe /in hdfs-07.keytab /princ hdfs/journal-0-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser journal-0-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass      /out hdfs-08.keytab
ktpass.exe /in hdfs-08.keytab /princ HTTP/journal-0-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser http-journal-0-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass /out hdfs-09.keytab
ktpass.exe /in hdfs-09.keytab /princ hdfs/journal-1-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser journal-1-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass      /out hdfs-10.keytab
ktpass.exe /in hdfs-10.keytab /princ HTTP/journal-1-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser http-journal-1-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass /out hdfs-11.keytab
ktpass.exe /in hdfs-11.keytab /princ hdfs/journal-2-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser journal-2-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass      /out hdfs-12.keytab
ktpass.exe /in hdfs-12.keytab /princ HTTP/journal-2-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser http-journal-2-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass /out hdfs-13.keytab
ktpass.exe /in hdfs-13.keytab /princ hdfs/data-0-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser data-0-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass            /out hdfs-14.keytab
ktpass.exe /in hdfs-14.keytab /princ HTTP/data-0-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser http-data-0-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass       /out hdfs-15.keytab
ktpass.exe /in hdfs-15.keytab /princ hdfs/data-1-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser data-1-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass            /out hdfs-16.keytab
ktpass.exe /in hdfs-16.keytab /princ HTTP/data-1-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser http-data-1-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass       /out hdfs-17.keytab
ktpass.exe /in hdfs-17.keytab /princ hdfs/data-2-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser data-2-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass            /out hdfs-18.keytab
ktpass.exe /in hdfs-18.keytab /princ HTTP/data-2-node.hdfs.autoip.dcos.thisdcos.directory@EXAMPLE.COM /mapuser http-data-2-node@example.com /ptype KRB5_NT_PRINCIPAL +rndPass       /out hdfs-19.keytab
ktpass.exe /in hdfs-19.keytab /princ HTTP/api.hdfs.l4lb.thisdcos.directory@EXAMPLE.COM /mapuser http-api@example.com /ptype KRB5_NT_PRINCIPAL +rndPass                              /out hdfs.keytab
</code></pre></div></div>
<p>Here it is assumed that the domain <code class="highlighter-rouge">example.com</code> exists and that the domain users (<code class="highlighter-rouge">name-0-node</code>, <code class="highlighter-rouge">http-name-0-node</code> etc.) have been created (using the <code class="highlighter-rouge">net user</code> command, for example).</p>

<p>The generated file <code class="highlighter-rouge">hdfs.keytab</code> can now be base64-encoded and added to the DC/OS secret store as above:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">base64</span> <span class="nt">-w0</span> hdfs.keytab <span class="o">&gt;</span> keytab.base64
<span class="nv">$ </span>dcos security secrets create  __dcos_base64__ad_keytab <span class="nt">--value-file</span> keytab.base64
</code></pre></div></div>

<p>Kerberized Apache HDFS can then be deployed using the following configuration options:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hdfs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"security"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"kerberos"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"kdc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"hostname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active-directory-dns.example.com"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">88</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"realm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EXAMPLE.COM"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"keytab_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"__dcos_base64__ad_keytab"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>This assumes that the Active Directory server is reachable from the DC/OS cluster at <code class="highlighter-rouge">active-directory-dns.example.com</code> and is accepting connections on port <code class="highlighter-rouge">88</code>. Note also the change in Kerberos realm and the DC/OS secret path used for the keytab.</p>

</div>
</div>
</body>

</html>
