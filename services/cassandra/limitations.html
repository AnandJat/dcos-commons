<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">







<head>
<title>Cassandra: Limitations</title>
<link rel="stylesheet" type="text/css" media="all" href="../../style/gh-basic.css" />
<link rel="shortcut icon" type="image/png" href="https://mesosphere.com/favicon.ico"/>
<!-- The Dropdown library is written by Stephen Morley, licensed CC0 1.0 Universal (Public Domain Dedication)-->
<link rel="stylesheet" type="text/css" media="all" href="../../style/Dropdown.css" />
<script src="../../style/Dropdown.js"></script>
<style type="text/css">
/* set the background color of menu items */
.dropdown, .dropdown ul { background: #555555; clear: both; }
/* set the background color of active items */
.dropdown li:hover > a, .dropdown li:hover > span, .dropdown li.dropdownOpen > a, .dropdown li.dropdownOpen > span { background: #af87e0; }
/* pad items, set their text color, and fade their background color */
.dropdown a, .dropdown span { padding: 0.25em 0.5em; color: white; transition: background 0.2s; }
/* show '+' on expandable items */
.dropdown span:after { content: " +"; }

/* toc style: remove extra margin between elements */
#markdown-toc ul { margin: 0; }
</style>
</head>

<body>
<div id="wrapper">

<a href="../..">
<img style="float: left; margin-bottom: 2em" src="https://mesosphere.com/wp-content/themes/mesosphere/library/images/assets/dcos-sdk-logo.png" width="250" alt="DC/OS Software Development Kit" />
</a>
<img style="float: right" src="https://img.shields.io/badge/Status-Alpha-BF97F0.svg?style=flat-square" alt="Status: Alpha" />

<ul class="dropdown" style="clear: both">
  <li>
    <a href="../..">Home</a>
  </li>
  <li>
    <span>Documentation</span>
    <ul>
      
      
      
      
      <li><a href="../../developer-guide.html">SDK Developer Guide</a></li>
      
      
      
      <li><a href="../../operations-guide.html">SDK Operations Guide</a></li>
      
      
      
      <li><a href="../../faq.html">Frequently Asked Questions</a></li>
      
      
      
      <li><a href="../../glossary.html">Glossary</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </li>
  <li>
    <span>Tutorials</span>
    <ul>
      
      
      
      <li><a href="../../tutorials/secrets-tutorial.html">Secrets Tutorial</a></li>
      
      <li><a href="../../tutorials/kafka-tutorial.html">Kafka Tutorial</a></li>
      
    </ul>
  </li>
  <li>
    <span>Reference</span>
    <ul>
      
      
      
      <li><a href="../../reference/yaml-reference.html">YAML Reference</a></li>
      
      <li><a href="../../reference/api">Javadoc Reference</a></li>
      <li><a href="../../reference/swagger-api">REST APIs</a></li>
    </ul>
  </li>
  <li>
    <span>Services</span>
    <ul>
      
      
      
      
      <li>
        
        <span>Elastic</span>
        
        <ul>
          
          
          <li><a href="../../services/elastic/install.html">Install and Customize</a></li>
          
          <li><a href="../../services/elastic/elastic-x-pack.html">X-Pack</a></li>
          
          <li><a href="../../services/elastic/custom-elasticsearch-yaml.html">Custom Elasticsearch YAML</a></li>
          
          <li><a href="../../services/elastic/uninstall.html">Uninstall</a></li>
          
          <li><a href="../../services/elastic/quick-start.html">Quick Start</a></li>
          
          <li><a href="../../services/elastic/connecting-clients.html">Connecting Clients</a></li>
          
          <li><a href="../../services/elastic/managing.html">Managing</a></li>
          
          <li><a href="../../services/elastic/api-reference.html">API Reference</a></li>
          
          <li><a href="../../services/elastic/disaster-recovery.html">Disaster Recovery</a></li>
          
          <li><a href="../../services/elastic/troubleshooting.html">Troubleshooting</a></li>
          
          <li><a href="../../services/elastic/limitations.html">Limitations</a></li>
          
          <li><a href="../../services/elastic/supported-versions.html">Supported Versions</a></li>
          
          <li><a href="../../services/elastic/release-notes.html">Release Notes</a></li>
          
          <li><a href="../../services/elastic/upgrade.html">Upgrade</a></li>
          
        </ul>
      </li>
      
      <li>
        
        <span>HDFS</span>
        
        <ul>
          
          
          <li><a href="../../services/hdfs/install.html">Install and Customize</a></li>
          
          <li><a href="../../services/hdfs/kerberos.html">Kerberos</a></li>
          
          <li><a href="../../services/hdfs/uninstall.html">Uninstall</a></li>
          
          <li><a href="../../services/hdfs/quick-start.html">Quickstart</a></li>
          
          <li><a href="../../services/hdfs/connecting-clients.html">Connecting Clients</a></li>
          
          <li><a href="../../services/hdfs/managing.html">Managing</a></li>
          
          <li><a href="../../services/hdfs/api-reference.html">API Reference</a></li>
          
          <li><a href="../../services/hdfs/troubleshooting.html">Troubleshooting</a></li>
          
          <li><a href="../../services/hdfs/limitations.html">Limitations</a></li>
          
          <li><a href="../../services/hdfs/supported-versions.html">Supported Versions</a></li>
          
          <li><a href="../../services/hdfs/release-notes.html">Release Notes</a></li>
          
          <li><a href="../../services/hdfs/upgrade.html">Upgrade</a></li>
          
        </ul>
      </li>
      
      <li>
        
        <span>Kafka</span>
        
        <ul>
          
          
          <li><a href="../../services/kafka/install.html">Install and Customize</a></li>
          
          <li><a href="../../services/kafka/kerberos.html">Kerberos</a></li>
          
          <li><a href="../../services/kafka/ssl-auth.html">SSL Auth</a></li>
          
          <li><a href="../../services/kafka/uninstall.html">Uninstall</a></li>
          
          <li><a href="../../services/kafka/quick-start.html">Quick Start</a></li>
          
          <li><a href="../../services/kafka/connecting-clients.html">Connecting Clients</a></li>
          
          <li><a href="../../services/kafka/api-reference.html">API Reference</a></li>
          
          <li><a href="../../services/kafka/troubleshooting.html">Troubleshooting</a></li>
          
          <li><a href="../../services/kafka/limitations.html">Limitations</a></li>
          
          <li><a href="../../services/kafka/supported-versions.html">Supported Versions</a></li>
          
          <li><a href="../../services/kafka/release-notes.html">Release Notes</a></li>
          
          <li><a href="../../services/kafka/upgrade.html">Upgrade</a></li>
          
        </ul>
      </li>
      
    </ul>
  </li>
  <li><a href="https://github.com/mesosphere/dcos-commons/blob/master/CONTRIBUTING.md">Contributing</a></li>
  <li><a href="http://chat.dcos.io" target="_blank">Slack</a></li>
</ul>
<h1>Cassandra: Limitations</h1>
<div id="content">
<h2 id="node-count">Node Count</h2>

<p>The DC/OS Cassandra Service must be deployed with at least 3 nodes.</p>

<h2 id="security">Security</h2>

<p>Apache Cassandraâ€™s native TLS, authentication, and authorization features are not supported at this time.</p>

<h2 id="data-center-name">Data Center Name</h2>

<p>The name of the data center cannot be changed after installation. <code class="highlighter-rouge">service.data_center</code> and <code class="highlighter-rouge">service.rack</code> options are not allowed to be modified once Cassandra is installed.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"service": {
...
        data_center": {
          "description": "The name of the data center this cluster is running in",
          "type": "string",
          "default": "datacenter1"
        },
        "rack": {
          "description": "The name of the rack this cluster is running on",
          "type": "string",
          "default": "rack1"
        },
...
}
</code></pre>
</div>

<h2 id="service-user">Service user</h2>

<p>The DC/OS Cassandra Service uses a Docker image to manage its dependencies on Python 2.7 and the CLI tools for Amazon AWS and Microsoft Azure cloud services. Since the Docker image contains a full Linux userspace with its own <code class="highlighter-rouge">/etc/users</code> file, it is possible for the default service user <code class="highlighter-rouge">nobody</code> to have a different UID inside the container than on the host system. Although user <code class="highlighter-rouge">nobody</code> has UID <code class="highlighter-rouge">65534</code> by convention on many systems, this is not always the case. As Mesos does not perform UID mapping between Linux user namespaces, specifying a service user of <code class="highlighter-rouge">nobody</code> in this case will cause access failures when the container user attempts to open or execute a filesystem resource owned by a user with a different UID, preventing the service from launching. If the hosts in your cluster have a UID for <code class="highlighter-rouge">nobody</code> other than 65534, you will need to specify a service user of <code class="highlighter-rouge">root</code> to run DC/OS Cassandra Service successfully.</p>

<p>To determine the UID of <code class="highlighter-rouge">nobody</code>, run the command <code class="highlighter-rouge">id nobody</code> on a host in your cluster:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>$ id nobody
uid=65534(nobody) gid=65534(nobody) groups=65534(nobody)
</code></pre>
</div>

<p>If the returned UID is not <code class="highlighter-rouge">65534</code>, then the DC/OS Cassandra Service can be installed as root by setting the service user at install time:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>"service": {
        "user": "root",
        ...
}
...
</code></pre>
</div>

<h2 id="out-of-band-configuration">Out-of-band configuration</h2>

<p>Out-of-band configuration modifications are not supported. The serviceâ€™s core responsibility is to deploy and maintain the service with a specified configuration. In order to do this, the service assumes that it has ownership of task configuration. If an end-user makes modifications to individual tasks through out-of-band configuration operations, the service will override those modifications at a later time. For example:</p>
<ul>
  <li>If a task crashes, it will be restarted with the configuration known to the scheduler, not one modified out-of-band.</li>
  <li>If a configuration update is initiated, all out-of-band modifications will be overwritten during the rolling update.</li>
</ul>

<h2 id="scaling-in">Scaling in</h2>

<p>To prevent accidental data loss, the service does not support reducing the number of pods.</p>

<h2 id="disk-changes">Disk changes</h2>

<p>To prevent accidental data loss from reallocation, the service does not support changing volume requirements after initial deployment.</p>

<h2 id="best-effort-installation">Best-effort installation</h2>

<p>If your cluster doesnâ€™t have enough resources to deploy the service as requested, the initial deployment will not complete until either those resources are available or until you reinstall the service with corrected resource requirements. Similarly, scale-outs following initial deployment will not complete if the cluster doesnâ€™t have the needed available resources to complete the scale-out.</p>

<h2 id="virtual-networks">Virtual networks</h2>

<p>When the service is deployed on a virtual network, the service may not be switched to host networking without a full re-installation. The same is true for attempting to switch from host to virtual networking.</p>

<h2 id="task-environment-variables">Task Environment Variables</h2>

<p>Each service task has some number of environment variables, which are used to configure the task. These environment variables are set by the service scheduler. While it is <em>possible</em> to use these environment variables in adhoc scripts (e.g. via <code class="highlighter-rouge">dcos task exec</code>), the name of a given environment variable may change between versions of a service and should not be considered a public API of the service.</p>

</div>
</div>
</body>

</html>
