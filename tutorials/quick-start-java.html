<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">







<head>
<title>Quick Start (Java)</title>
<link rel="stylesheet" type="text/css" media="all" href="../style/gh-basic.css" />
<link rel="shortcut icon" type="image/png" href="https://mesosphere.com/favicon.ico"/>
<!-- The Dropdown library is written by Stephen Morley, licensed CC0 1.0 Universal (Public Domain Dedication)-->
<link rel="stylesheet" type="text/css" media="all" href="../style/Dropdown.css" />
<script src="../style/Dropdown.js"></script>
<style type="text/css">
/* set the background color of menu items */
.dropdown, .dropdown ul { background: #555555; clear: both; }
/* set the background color of active items */
.dropdown li:hover > a, .dropdown li:hover > span, .dropdown li.dropdownOpen > a, .dropdown li.dropdownOpen > span { background: #af87e0; }
/* pad items, set their text color, and fade their background color */
.dropdown a, .dropdown span { padding: 0.25em 0.5em; color: white; transition: background 0.2s; }
/* show '+' on expandable items */
.dropdown span:after { content: " +"; }

/* toc style: remove extra margin between elements */
#markdown-toc ul { margin: 0; }
</style>
</head>

<body>
<div id="wrapper">

<a href="..">
<img style="float: left; margin-bottom: 2em" src="https://mesosphere.com/wp-content/themes/mesosphere/library/images/assets/dcos-sdk-logo.png" width="250" alt="DC/OS Software Development Kit" />
</a>
<img style="float: right" src="https://img.shields.io/badge/Status-Alpha-BF97F0.svg?style=flat-square" alt="Status: Alpha" />

<ul class="dropdown" style="clear: both">
  <li>
    <a href="..">Home</a>
  </li>
  <li>
    <span>Documentation</span>
    <ul>
      
      
      
      <li><a href="../operations-guide.html">SDK Operations Guide</a></li>
      
      <li><a href="../developer-guide.html">SDK Developer Guide</a></li>
      
      <li><a href="../yaml-reference.html">YAML Reference</a></li>
      
      <li><a href="../glossary.html">Glossary</a></li>
      
      <li><a href="../faq.html">Frequently Asked Questions</a></li>
      
      <li><a href="../ops-guide"></a></li>
      
      <li><a href="../swagger-api">REST APIs</a></li>
      <li><a href="../api">Javadoc Reference</a></li>
    </ul>
  </li>
  <li>
    <span>Tutorials</span>
    <ul>
      
      
      
      <li><a href="../tutorials/data-store-tutorial.html">Data Store Tutorial</a></li>
      
      <li><a href="../tutorials/kafka-tutorial.html">Kafka Tutorial</a></li>
      
      <li><a href="../tutorials/automatic-repair.html">Automatic Repair</a></li>
      
      <li><a href="../tutorials/quick-start-java.html">Quick Start (Java)</a></li>
      
    </ul>
  </li>
  <li>
    <span>Services</span>
    <ul>
      
      
      
      
      <li>
        
        <span>Elastic</span>
        
        <ul>
          
          
          <li><a href="../services/elastic/install.html">Install and Customize</a></li>
          
          <li><a href="../services/elastic/quick-start.html">Usage Example</a></li>
          
          <li><a href="../services/elastic/upgrade.html">Upgrade</a></li>
          
          <li><a href="../services/elastic/uninstall.html">Uninstall</a></li>
          
          <li><a href="../services/elastic/configure.html">Configuring</a></li>
          
          <li><a href="../services/elastic/x-pack.html">X-Pack</a></li>
          
          <li><a href="../services/elastic/connecting.html">Connecting Clients</a></li>
          
          <li><a href="../services/elastic/backup_restore.html">Backup and Restore</a></li>
          
          <li><a href="../services/elastic/managing.html">Managing</a></li>
          
          <li><a href="../services/elastic/api-reference.html">API Reference</a></li>
          
          <li><a href="../services/elastic/troubleshooting.html">Troubleshooting</a></li>
          
          <li><a href="../services/elastic/version_policy.html">Version Policy</a></li>
          
          <li><a href="../services/elastic/limitations.html">Limitations</a></li>
          
          <li><a href="../services/elastic/changelog.html">Changelog</a></li>
          
        </ul>
      </li>
      
      <li>
        
        <span>HDFS</span>
        
        <ul>
          
          
          <li><a href="../services/hdfs/install.html">Install and Customize</a></li>
          
          <li><a href="../services/hdfs/quick-start.html">Quick Start</a></li>
          
          <li><a href="../services/hdfs/uninstall.html">Uninstall</a></li>
          
          <li><a href="../services/hdfs/configure.html">Configuring</a></li>
          
          <li><a href="../services/hdfs/connecting-clients.html">Connecting Clients</a></li>
          
          <li><a href="../services/hdfs/limitations.html">Limitations</a></li>
          
          <li><a href="../services/hdfs/managing.html">Managing</a></li>
          
          <li><a href="../services/hdfs/api-reference.html">API Reference</a></li>
          
          <li><a href="../services/hdfs/troubleshooting.html">Troubleshooting</a></li>
          
        </ul>
      </li>
      
      <li>
        
        <span>Kafka</span>
        
        <ul>
          
          
          <li><a href="../services/kafka/install-and-customize.html">Install and Customize</a></li>
          
          <li><a href="../services/kafka/quick-start.html">Quick Start</a></li>
          
          <li><a href="../services/kafka/uninstall.html">Uninstall</a></li>
          
          <li><a href="../services/kafka/configure.html">Configure</a></li>
          
          <li><a href="../services/kafka/connecting-clients.html">Connecting Clients</a></li>
          
          <li><a href="../services/kafka/managing.html">Managing</a></li>
          
          <li><a href="../services/kafka/api-reference.html">API Reference</a></li>
          
          <li><a href="../services/kafka/troubleshooting.html">Troubleshooting</a></li>
          
          <li><a href="../services/kafka/version-policy.html">Version Policy</a></li>
          
          <li><a href="../services/kafka/limitations.html">Limitations</a></li>
          
        </ul>
      </li>
      
    </ul>
  </li>
  <li><a href="https://github.com/mesosphere/dcos-commons/blob/master/CONTRIBUTING.md">Contributing</a></li>
  <li><a href="http://chat.dcos.io" target="_blank">Slack</a></li>
</ul>
<h1>Quick Start (Java)</h1>
<div id="content">
<h3 id="overview">Overview</h3>
<p>This quick start guide introduces key concepts that we will use for modeling real stateful services using the Java interface.</p>

<p>In this tutorial, we’ll build our <code class="highlighter-rouge">helloworld</code> service using the Java interface. The <code class="highlighter-rouge">helloworld</code> service will be composed of a single instance of the <code class="highlighter-rouge">helloworld</code> pod, running a single <code class="highlighter-rouge">server</code> task.</p>

<h3 id="step-0---clone-the-project">Step 0 - Clone the project</h3>
<p>Get started by forking: <a href="https://github.com/mesosphere/dcos-commons">https://github.com/mesosphere/dcos-commons</a> and cloning it on your workstation. Change your working directory to <code class="highlighter-rouge">dcos-commons</code>.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd </span>dcos-commons
<span class="o">(</span>dcos-commons<span class="o">)</span><span class="err">$</span>
</code></pre>
</div>

<h3 id="step-1---provision-a-dev-dcos-cluster">Step 1 - Provision a Dev DC/OS Cluster</h3>
<p>Let’s provision a DC/OS cluster for the purposes of development. You can install one locally on your developer workstation using the bundled Vagrant setup which can be initialized as follows:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">(dcos-commons)$ </span>./get-dcos-docker.sh
</code></pre>
</div>

<p>Visit the DC/OS cluster <a href="http://172.17.0.2/">dashboard</a> to verify your development environment is running.</p>

<p>Next, ssh into the vagrant box:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">(dcos-commons)$ </span><span class="nb">cd </span>tools/vagrant/ <span class="o">&amp;&amp;</span> vagrant ssh
</code></pre>
</div>

<p>And, finally change the directory to <code class="highlighter-rouge">/dcos-commons</code>. This is where the source code from your host is mounted inside the Vagrant box:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd</span> /dcos-commons/
<span class="o">(</span>dcos-commons<span class="o">)</span><span class="err">$</span>
</code></pre>
</div>

<h3 id="step-2---initialize-the-service-project">Step 2 - Initialize the Service Project</h3>
<p>Get started by forking https://github.com/mesosphere/dcos-commons, and cloning it on your workstation. Change your working directory to <code class="highlighter-rouge">dcos-commons</code> and then issue following command to create a new project:</p>

<h4 id="host-inside-monorepo">Host inside Monorepo</h4>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">(dcos-commons)$ </span>./new-framework.sh frameworks/helloworldjava
</code></pre>
</div>

<p>The command above generates a new project at location <code class="highlighter-rouge">frameworks/helloworldjava/</code>:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">(dcos-commons)$ </span>ls -l frameworks/helloworldjava/
total 12
-rw-r--r--  1 dcos staff  68 Nov 22 14:49 README.md
drwxr-xr-x 12 dcos staff 408 Nov 18 13:47 build
-rw-r--r--  1 dcos staff 876 Nov 22 14:49 build.gradle
-rwxr-xr-x  1 dcos staff 487 Nov 22 14:49 build.sh
drwxr-xr-x  3 dcos staff 102 Nov 22 14:49 cli
drwxr-xr-x  4 dcos staff 136 Nov 22 14:49 integration
drwxr-xr-x  4 dcos staff 136 Nov 22 14:49 src
drwxr-xr-x  7 dcos staff 238 Nov 22 14:49 universe
</code></pre>
</div>

<h4 id="host-inside-standalone-repository">Host inside standalone repository</h4>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">(dcos-commons)$ </span>./new-standalone-service.sh helloworldjava /fs/parent/location
</code></pre>
</div>

<p>The command above generates a new project at location <code class="highlighter-rouge">/fs/parent/location/helloworldjava</code>:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">(dcos-commons)$ </span>ls -l /fs/parent/location/service-name
total 32
-rw-r--r--  1 dcos admin   15 Mar 21 08:54 README.md
-rw-r--r--  1 dcos admin  743 Mar 21 08:54 build.gradle
-rwxr-xr-x  1 dcos admin  781 Mar 21 08:54 build.sh
drwxr-xr-x  3 dcos admin  102 Mar 21 08:54 cli
drwxr-xr-x  3 dcos admin  102 Mar 21 08:54 gradle
-rwxr-xr-x  1 dcos admin 5241 Mar 21 08:54 gradlew
-rw-r--r--  1 dcos admin 2260 Mar 21 08:54 gradlew.bat
-rw-r--r--  1 dcos admin   26 Mar 21 08:54 settings.gradle
drwxr-xr-x  4 dcos admin  136 Mar 21 08:54 src
-rwxr-xr-x  1 dcos admin  346 Mar 21 08:54 test.sh
drwxr-xr-x 12 dcos admin  408 Mar 21 08:54 testing
drwxr-xr-x  5 dcos admin  170 Mar 21 08:54 tests
drwxr-xr-x 30 dcos admin 1020 Mar 21 08:54 tools
drwxr-xr-x  7 dcos admin  238 Mar 21 08:54 universe
</code></pre>
</div>

<h3 id="step-3---declarative-java-service-specification">Step 3 - Declarative Java Service Specification</h3>

<p>Define the <code class="highlighter-rouge">helloworldjava</code> service specification in Java using:</p>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">ServiceSpec</span> <span class="n">helloWorldSpec</span> <span class="o">=</span> <span class="n">DefaultServiceSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"helloworldjava"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">principal</span><span class="o">(</span><span class="s">"helloworldjava-principal"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">zookeeperConnection</span><span class="o">(</span><span class="s">"master.mesos:2181"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">apiPort</span><span class="o">(</span><span class="mi">8080</span><span class="o">)</span>
  <span class="o">.</span><span class="na">addPod</span><span class="o">(</span><span class="n">DefaultPodSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">count</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">getenv</span><span class="o">(</span><span class="s">"COUNT"</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">addTask</span><span class="o">(</span><span class="n">DefaultTaskSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
      <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"server"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">goalState</span><span class="o">(</span><span class="n">TaskSpec</span><span class="o">.</span><span class="na">GoalState</span><span class="o">.</span><span class="na">RUNNING</span><span class="o">)</span>
      <span class="o">.</span><span class="na">commandSpec</span><span class="o">(</span><span class="n">DefaultCommandSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">value</span><span class="o">(</span><span class="s">"echo 'Hello World!' &gt;&gt; helloworld-java-container-volume/output &amp;&amp; sleep 10"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">())</span>
      <span class="o">.</span><span class="na">resourceSet</span><span class="o">(</span><span class="n">DefaultResourceSet</span>
        <span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="s">"helloworldjava-role"</span><span class="o">,</span> <span class="s">"helloworld-java-principal"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="s">"helloworld-java-resources"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">cpus</span><span class="o">(</span><span class="n">Double</span><span class="o">.</span><span class="na">parseDouble</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">getenv</span><span class="o">(</span><span class="s">"SERVER_CPU"</span><span class="o">)))</span>
        <span class="o">.</span><span class="na">memory</span><span class="o">(</span><span class="mf">32.0</span><span class="o">)</span>
        <span class="o">.</span><span class="na">addVolume</span><span class="o">(</span><span class="s">"ROOT"</span><span class="o">,</span> <span class="mf">64.0</span><span class="o">,</span> <span class="s">"helloworldjava-container-volume"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">()).</span><span class="na">build</span><span class="o">()).</span><span class="na">build</span><span class="o">()).</span><span class="na">build</span><span class="o">();</span>
</code></pre>
</div>

<p>In above specification, we have:</p>
<ul>
  <li>Defined a service with name <code class="highlighter-rouge">helloworld-java</code> using <code class="highlighter-rouge">.name("helloworld-java")</code></li>
  <li>Configured the service to use ZooKeeper at <code class="highlighter-rouge">master.mesos:2181</code> for storing framework state and configuration using <code class="highlighter-rouge">.zookeeperConnection("master.mesos:2181")</code></li>
  <li>Configured the API port using <code class="highlighter-rouge">.apiPort(8080)</code>. By default, each service comes with a default set of useful APIs that enables operationalization.</li>
  <li>Defined a pod specification for our <code class="highlighter-rouge">helloworld</code> pod using:</li>
</ul>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">.</span><span class="na">addPod</span><span class="o">(</span><span class="n">DefaultPodSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">count</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">getenv</span><span class="o">(</span><span class="s">"COUNT"</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">addTask</span><span class="o">(</span><span class="n">DefaultTaskSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
    <span class="o">...</span>
</code></pre>
</div>
<ul>
  <li>Declared that we need atleast <code class="highlighter-rouge">COUNT</code> instances of <code class="highlighter-rouge">helloworld</code> pod running at all times.</li>
  <li>Defined a task specification for our <code class="highlighter-rouge">server</code> task using:</li>
</ul>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">.</span><span class="na">addTask</span><span class="o">(</span><span class="n">DefaultTaskSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"server"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">goalState</span><span class="o">(</span><span class="n">TaskSpec</span><span class="o">.</span><span class="na">GoalState</span><span class="o">.</span><span class="na">RUNNING</span><span class="o">)</span>
</code></pre>
</div>
<p>We have configured its goal state to be <code class="highlighter-rouge">RUNNING</code>, which tells the Service scheduler to keep the task up all the time.</p>
<ul>
  <li>Defined a command specification for our <code class="highlighter-rouge">server</code> task that specifies the command that needs to be executed when starting the <code class="highlighter-rouge">server</code> task:</li>
</ul>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">.</span><span class="na">commandSpec</span><span class="o">(</span><span class="n">DefaultCommandSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">value</span><span class="o">(</span><span class="s">"echo 'Hello World!' &gt;&gt; helloworldjava-container-volume/output &amp;&amp; sleep 10"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">build</span><span class="o">())</span>
</code></pre>
</div>
<ul>
  <li>And finally, defined a resource set for our task that contains the resources that are required for the <code class="highlighter-rouge">server</code> task to run:</li>
</ul>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">.</span><span class="na">resourceSet</span><span class="o">(</span><span class="n">DefaultResourceSet</span>
  <span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="s">"helloworldjava-role"</span><span class="o">,</span> <span class="s">"helloworldjava-principal"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="s">"helloworld-java-resources"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">cpus</span><span class="o">(</span><span class="n">Double</span><span class="o">.</span><span class="na">parseDouble</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">getenv</span><span class="o">(</span><span class="s">"SERVER_CPU"</span><span class="o">)))</span>
  <span class="o">.</span><span class="na">memory</span><span class="o">(</span><span class="mf">32.0</span><span class="o">)</span>
  <span class="o">.</span><span class="na">addVolume</span><span class="o">(</span><span class="s">"ROOT"</span><span class="o">,</span> <span class="mf">64.0</span><span class="o">,</span> <span class="s">"helloworldjava-container-volume"</span><span class="o">)</span>
</code></pre>
</div>
<p>The above resource set configures the CPU shares using the <code class="highlighter-rouge">SERVER_CPU</code> environment variable, configures <code class="highlighter-rouge">32</code> MB of memory, and also configures the task with <code class="highlighter-rouge">64</code> MB of persistent volume mounted inside the task sandbox at path <code class="highlighter-rouge">helloworld-java-container-volume</code>.</p>

<h3 id="step-4---writing-executable-class">Step 4 - Writing executable class</h3>

<p>To make the above declarative service specification executable, we need to initialize an instance of <code class="highlighter-rouge">Service</code> with it. In order to do that, modify the <code class="highlighter-rouge">Main</code> class, located at: <code class="highlighter-rouge">src/main/java/com/mesosphere/sdk/helloworld/scheduler/Main.java</code></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">mesosphere</span><span class="o">.</span><span class="na">sdk</span><span class="o">.</span><span class="na">helloworld</span><span class="o">.</span><span class="na">scheduler</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.mesos.specification.*</span><span class="o">;</span>

<span class="cm">/**
 * Main using Java specification.
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
      <span class="n">ServiceSpec</span> <span class="n">helloWorldSpec</span> <span class="o">=</span> <span class="n">DefaultServiceSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"helloworldjava"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">principal</span><span class="o">(</span><span class="s">"helloworldjava-principal"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">zookeeperConnection</span><span class="o">(</span><span class="s">"master.mesos:2181"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">apiPort</span><span class="o">(</span><span class="mi">8080</span><span class="o">)</span>
        <span class="o">.</span><span class="na">addPod</span><span class="o">(</span><span class="n">DefaultPodSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
          <span class="o">.</span><span class="na">count</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">getenv</span><span class="o">(</span><span class="s">"COUNT"</span><span class="o">)))</span>
          <span class="o">.</span><span class="na">addTask</span><span class="o">(</span><span class="n">DefaultTaskSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"server"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">goalState</span><span class="o">(</span><span class="n">TaskSpec</span><span class="o">.</span><span class="na">GoalState</span><span class="o">.</span><span class="na">RUNNING</span><span class="o">)</span>
            <span class="o">.</span><span class="na">commandSpec</span><span class="o">(</span><span class="n">DefaultCommandSpec</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
              <span class="o">.</span><span class="na">value</span><span class="o">(</span><span class="s">"echo 'Hello World!' &gt;&gt; helloworldjava-container-volume/output &amp;&amp; sleep 10"</span><span class="o">)</span>
              <span class="o">.</span><span class="na">build</span><span class="o">())</span>
            <span class="o">.</span><span class="na">resourceSet</span><span class="o">(</span><span class="n">DefaultResourceSet</span>
              <span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="s">"helloworldjava-role"</span><span class="o">,</span> <span class="s">"helloworldjava-principal"</span><span class="o">)</span>
              <span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="s">"helloworldjava-resources"</span><span class="o">)</span>
              <span class="o">.</span><span class="na">cpus</span><span class="o">(</span><span class="n">Double</span><span class="o">.</span><span class="na">parseDouble</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">getenv</span><span class="o">(</span><span class="s">"SERVER_CPU"</span><span class="o">)))</span>
              <span class="o">.</span><span class="na">memory</span><span class="o">(</span><span class="mf">32.0</span><span class="o">)</span>
              <span class="o">.</span><span class="na">addVolume</span><span class="o">(</span><span class="s">"ROOT"</span><span class="o">,</span> <span class="mf">64.0</span><span class="o">,</span> <span class="s">"helloworldjava-container-volume"</span><span class="o">)</span>
              <span class="o">.</span><span class="na">build</span><span class="o">()).</span><span class="na">build</span><span class="o">()).</span><span class="na">build</span><span class="o">()).</span><span class="na">build</span><span class="o">();</span>
      <span class="n">Service</span> <span class="n">service</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultService</span><span class="o">(</span><span class="n">helloWorldSpec</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Now we are ready to take the <code class="highlighter-rouge">helloworldjava</code> service for a spin.</p>

<h3 id="step-5---build">Step 5 - Build</h3>
<p>Build your project by running <code class="highlighter-rouge">./build.sh local</code> from the <code class="highlighter-rouge">/dcos-commons/frameworks/helloworldjava</code> directory:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">(helloworldjava)$ </span>./build.sh <span class="nb">local</span>
</code></pre>
</div>

<p>The command above generates a deployable package and makes it available for deployment inside the locally running DC/OS cluster.</p>

<h3 id="step-6---run">Step 6 - Run</h3>
<p>Finally, install the <code class="highlighter-rouge">helloworldjava</code> project using:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>dcos package install helloworldjava
</code></pre>
</div>

<p>Visit the <a href="http://172.17.0.2/#/services/%2Fhelloworldjava/">dashboard</a> to see your <code class="highlighter-rouge">helloworldjava</code> service running.</p>

</div>
</div>
</body>

</html>
